<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nightforge — Dungeon Roguelite</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">⚒️</div>
        <div>
          <h1>Nightforge</h1>
          <small>Dark dungeons • ☾</small>
        </div>
      </div>

      <nav class="tabs">
        <button data-tab="dungeon" class="tab active">Dungeon 🗡️</button>
        <button data-tab="inventory" class="tab">Inventory 🎒</button>
        <button data-tab="shop" class="tab">Shop 💰</button>
        <button data-tab="workshop" class="tab">Workshop 🛠️</button>
        <button data-tab="stats" class="tab">Stats 📊</button>
      </nav>

      <div class="player-card">
        <div class="player-name glowing">You — <span id="player-level">1</span></div>
        <div class="resources">
          <span>❤️ <b id="player-hp">20</b>/<small id="player-maxhp">20</small></span>
          <span>⚡ <b id="player-sp">0</b></span>
          <span>⭐ <b id="player-xp">0</b></span>
        </div>
        <div class="currency">
          <span>💰 <b id="gold">0</b></span>
          <span>🔧 <b id="skillpoints">0</b></span>
        </div>

        <!-- removed reset from sidebar (moved to Stats) -->
      </div>

      <div class="dungeon-select-side">
        <div class="muted small">Choose dungeon</div>
        <select id="dungeonSelect" class="select">
          <option value="forest">🌲 Forest Ruins (Starter)</option>
          <option value="nightforge">🔥 Nightforge (Later)</option>
        </select>
        <button id="enterDungeonQuick" class="btn small">Enter Selected</button>
      </div>
    </aside>

    <main class="main">
      <!-- Dungeon / Combat -->
      <section id="tab-dungeon" class="panel active">
        <header class="panel-header">
          <h2>Enter the Dungeon</h2>
          <div class="panel-sub">Turn-based combat • 4 move slots • loot & XP</div>
        </header>

        <div class="dungeon-controls">
          <button id="enterDungeon" class="btn large">Enter Dungeon ⚔️</button>
          <button id="fleeBtn" class="btn subtle">Flee</button>

          <div class="muted">Selected: <b id="selectedDungeonLabel">Forest Ruins</b></div>
        </div>

        <div class="arena">
          <div class="combatant player">
            <div class="avatar">🧙</div>
            <div class="info">
              <div class="name">Player</div>
              <div class="statline">HP: <span id="hud-player-hp">-</span> • STR: <span id="hud-str">0</span> • MAG: <span id="hud-mag">0</span> • VIT: <span id="hud-vit">0</span></div>
            </div>
          </div>

          <div class="combat-log" id="combatLog">
            <div class="log-line muted">Welcome to Nightforge — press <b>Enter Dungeon</b> to begin.</div>
          </div>

          <div class="combatant enemy" id="enemyBox" style="display:none;">
            <div class="avatar big" id="enemyAvatar">👹</div>
            <div class="info">
              <div class="name" id="enemyName">Goblin</div>
              <div class="statline">HP: <span id="enemyHP">-</span></div>
              <div class="enemy-statusline" id="enemyStatusLine" aria-live="polite"></div>
            </div>
          </div>
        </div>

        <div class="moves-grid">
          <div class="move-slot" data-slot="0">
            <div class="move-name" id="moveName0">—</div>
            <div class="move-desc" id="moveDesc0">Empty</div>
            <div class="move-actions">
              <button class="btn small use-move" data-slot="0">Use</button>
              <button class="btn tiny swap-move" data-slot="0">Swap</button>
            </div>
          </div>
          <div class="move-slot" data-slot="1">
            <div class="move-name" id="moveName1">—</div>
            <div class="move-desc" id="moveDesc1">Empty</div>
            <div class="move-actions">
              <button class="btn small use-move" data-slot="1">Use</button>
              <button class="btn tiny swap-move" data-slot="1">Swap</button>
            </div>
          </div>
          <div class="move-slot" data-slot="2">
            <div class="move-name" id="moveName2">—</div>
            <div class="move-desc" id="moveDesc2">Empty</div>
            <div class="move-actions">
              <button class="btn small use-move" data-slot="2">Use</button>
              <button class="btn tiny swap-move" data-slot="2">Swap</button>
            </div>
          </div>
          <div class="move-slot" data-slot="3">
            <div class="move-name" id="moveName3">—</div>
            <div class="move-desc" id="moveDesc3">Empty</div>
            <div class="move-actions">
              <button class="btn small use-move" data-slot="3">Use</button>
              <button class="btn tiny swap-move" data-slot="3">Swap</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Inventory -->
      <section id="tab-inventory" class="panel">
        <header class="panel-header">
          <h2>Inventory 🎒</h2>
          <div class="panel-sub">Click an item to view details / sell</div>
        </header>

        <div id="inventoryGrid" class="inventory-grid"></div>

        <div id="itemDetail" class="item-detail">
          <h3 id="detailName">No item selected</h3>
          <p id="detailDesc"></p>
          <ul id="detailStats"></ul>
          <div class="detail-actions">
            <button id="sellOne" class="btn">Sell 1</button>
            <button id="useItem" class="btn subtle">Use</button>
          </div>
        </div>
      </section>

      <!-- Shop -->
      <section id="tab-shop" class="panel">
        <header class="panel-header">
          <h2>Shop 💰</h2>
          <div class="panel-sub">Buy equipment & consumables</div>
        </header>

        <div id="shopList" class="shop-list"></div>
      </section>

      <!-- Workshop -->
      <section id="tab-workshop" class="panel">
        <header class="panel-header">
          <h2>Workshop 🛠️</h2>
          <div class="panel-sub">Manage moves, purchase moves with skillpoints / gold / items</div>
        </header>

        <div id="moveCatalog" class="move-catalog"></div>
        <div class="workshop-note muted">Hint: some moves require stats — allocate in Stats tab first.</div>
      </section>

      <!-- Stats -->
      <section id="tab-stats" class="panel">
        <header class="panel-header">
          <h2>Stats & Progression 📊</h2>
          <div class="panel-sub">Allocate 3 points per level. Free reset is available.</div>
        </header>

        <div class="stats-grid">
          <div class="stat">
            <div class="stat-name">Magic ✨</div>
            <div class="stat-val" id="stat-mag">0</div>
            <button class="btn small plus" data-stat="mag">+</button>
          </div>
          <div class="stat">
            <div class="stat-name">Strength 💪</div>
            <div class="stat-val" id="stat-str">0</div>
            <button class="btn small plus" data-stat="str">+</button>
          </div>
          <div class="stat">
            <div class="stat-name">Vitality 🛡️</div>
            <div class="stat-val" id="stat-vit">0</div>
            <button class="btn small plus" data-stat="vit">+</button>
          </div>
        </div>

        <div class="stat-info">
          <div>Unallocated points: <b id="unallocated">0</b></div>
          <div>Points per level: <b>3</b></div>
        </div>

        <div style="margin-top:12px;">
          <button id="resetStatsBtn" class="btn subtle">🔄 Free Reset (unallocate & clear slots)</button>
        </div>
      </section>

    </main>
  </div>

  <!-- status tooltip -->
  <div id="statusTooltip" class="status-tooltip" style="display:none;"></div>

  <script src="script.js"></script>
</body>
</html>
